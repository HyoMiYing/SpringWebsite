<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferdydurke</title>
</head>
<body>
    <h1>Ferdydurke</h1>
    <h3>1937</h3>
    <h2>Witold Gombrowicz</h2>
    <h3>prevedla: Katarina Šalamun-Biedrzycka</h3>
    <h4>prebral: Rok Klančar</h4>
    <audio id="audio-player" controls th:src="@{/ferdydurke_stream}"></audio>
    <br>
    <button id="back-30-sec">Prevrti 30 sekund</button>
    <button id="forward-30-sec">Preskoči 30 sekund</button>
    <br>
    <h4>Hitrost predvajanja</h4>
    <ul>
        <li id="x0.5">x0.5</li>
        <li id="x0.75">x0.75</li>
        <li id="x1.0">x1.0</li>
        <li id="x1.25">x1.25</li>
        <li id="x1.5">x1.5</li>
        <li id="x1.75">x1.75</li>
        <li id="x2.0">x2.0</li>
    </ul>
    <br>
    <h4>Poglavja</h4>
    <ul>
        <li id="chapter1">1. Poglavje: UGRABITEV</li>
        <li id="chapter2">2. Poglavje: V JETNIŠTVU IN NADALJNEM MANJŠANJU</li>
        <li id="chapter3">3. Poglavje: V MIŠNICI IN NADALJNEM MEČKANJU</li>
        <li id="chapter4">4. Poglavje: PREDGOVOR K FILIDORJU S PODLAGO V OTROKU</li>
        <li id="chapter5">5. Poglavje: FILIDOR, S PODLAGO V OTROKU</li>
        <li id="chapter6">6. Poglavje: ZAPELJEVANJE, SILJENJE V MLADOST SE NADALJUJE</li>
        <li id="chapter7">7. Poglavje: LJUBEZEN</li>
        <li id="chapter8">8. Poglavje: KOMPOT</li>
        <li id="chapter9">9. Poglavje: ZALEZOVANJE, TIPANJE V SODOBNOST SE NADALJUJE</li>
        <li id="chapter10">10. Poglavje: ORGIJA STEGEN IN ZNOVA V MIŠNICI</li>
        <li id="chapter11">11. Poglavje: PREDGOVOR K FILIBERTU, PODLOŽENEMU Z OTROKOM</li>
        <li id="chapter12">12. Poglavje: FILIBERT, PODLOŽEN Z OTROKOM</li>
        <li id="chapter13">13. Poglavje: HLAPČIČ ALI NOVE NEVARNOSTI</li>
        <li id="chapter14">14. Poglavje: ORGIJA FRISOV IN ZNOVA V MIŠNICI</li>
    </ul>
    <br>
    <h4>Najboljši trenutki</h4>
    <ol>
        <li id="cool-moment1">3:48:20</li>
        <li id="cool-moment2">4:14:50</li>
        <li id="cool-moment3">6:35:55</li>
        <li id="cool-moment4">7:54:15</li>
    </ol>

    <p>Nazaj na <a th:href="@{/}">domačo stran</a></p>
    <script>
        const audioPlayer = document.getElementById("audio-player");

        const back30Sec = document.getElementById("back-30-sec");
        const forward30Sec = document.getElementById("forward-30-sec");

        const x05 = document.getElementById("x0.5");
        const x075 = document.getElementById("x0.75");
        const x1 = document.getElementById("x1.0");
        const x125 = document.getElementById("x1.25");
        const x15 = document.getElementById("x1.5");
        const x175 = document.getElementById("x1.75");
        const x2 = document.getElementById("x2.0");

        const chapter1 = document.getElementById("chapter1");
        const chapter2 = document.getElementById("chapter2");
        const chapter3 = document.getElementById("chapter3");
        const chapter4 = document.getElementById("chapter4");
        const chapter5 = document.getElementById("chapter5");
        const chapter6 = document.getElementById("chapter6");
        const chapter7 = document.getElementById("chapter7");
        const chapter8 = document.getElementById("chapter8");
        const chapter9 = document.getElementById("chapter9");
        const chapter10 = document.getElementById("chapter10");
        const chapter11 = document.getElementById("chapter11");
        const chapter12 = document.getElementById("chapter12");
        const chapter13 = document.getElementById("chapter13");
        const chapter14 = document.getElementById("chapter14");

        const coolMoment1 = document.getElementById("cool-moment1");
        const coolMoment2 = document.getElementById("cool-moment2");
        const coolMoment3 = document.getElementById("cool-moment3");
        const coolMoment4 = document.getElementById("cool-moment4");

        document.addEventListener("DOMContentLoaded", (e) => {
            if (localStorage.getItem("player-position")) {
                audioPlayer.fastSeek(localStorage.getItem("player-position"));
            }
        });


        // Play speed

        x05.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 0.5;
        });

        x075.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 0.75;
        });

        x1.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 1.0;
        });

        x125.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 1.25;
        });

        x15.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 1.5;
        });

        x175.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 1.75;
        });

        x2.addEventListener("click", (e) => {
            audioPlayer.playbackRate = 2.0;
        });

        // Rewind/fast forward

        back30Sec.addEventListener("click", (e) => {
            audioPlayer.currentTime -= 30;
        });

        forward30Sec.addEventListener("click", (e) => {
            audioPlayer.currentTime += 30;
        });

        // Store playhead position

        audioPlayer.addEventListener("timeupdate", (e) => {
            localStorage.setItem("player-position", audioPlayer.currentTime);
        });

        // Chapters

        chapter1.addEventListener("click", (e) => {
            audioPlayer.currentTime = 23;
        });

        chapter2.addEventListener("click", (e) => {
            audioPlayer.currentTime = 2981;
        });

        chapter3.addEventListener("click", (e) => {
            audioPlayer.currentTime = 6943;
        });

        chapter4.addEventListener("click", (e) => {
            audioPlayer.currentTime = 9940;
        });

        chapter5.addEventListener("click", (e) => {
            audioPlayer.currentTime = 12950;
        });

        chapter6.addEventListener("click", (e) => {
            audioPlayer.currentTime = 15259;
        });

        chapter7.addEventListener("click", (e) => {
            audioPlayer.currentTime = 17586;
        });

        chapter8.addEventListener("click", (e) => {
            audioPlayer.currentTime = 19309;
        });

        chapter9.addEventListener("click", (e) => {
            audioPlayer.currentTime = 21529;
        });

        chapter10.addEventListener("click", (e) => {
            audioPlayer.currentTime = 24603;
        });

        chapter11.addEventListener("click", (e) => {
            audioPlayer.currentTime = 27869;
        });

        chapter12.addEventListener("click", (e) => {
            audioPlayer.currentTime = 28445;
        });

        chapter13.addEventListener("click", (e) => {
            audioPlayer.currentTime = 28787;
        });

        chapter14.addEventListener("click", (e) => {
            audioPlayer.currentTime = 33430;
        });

        // Cool moments

        coolMoment1.addEventListener("click", (e) => {
            audioPlayer.currentTime = 13700;
        });

        coolMoment2.addEventListener("click", (e) => {
            audioPlayer.currentTime = 15290;
        });

        coolMoment3.addEventListener("click", (e) => {
            audioPlayer.currentTime = 23755;
        });

        coolMoment4.addEventListener("click", (e) => {
            audioPlayer.currentTime = 28455;
        });
    </script>
</body>
</html>